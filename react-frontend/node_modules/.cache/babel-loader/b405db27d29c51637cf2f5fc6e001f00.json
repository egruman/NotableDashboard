{"ast":null,"code":"import _assertThisInitialized from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\Users\\\\Ethan\\\\Documents\\\\hackathons\\\\NotableDashboard\\\\react-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import logo from\"./logo.svg\";import DatePicker from\"react-datepicker\";import TimePicker from'react-time-picker';import'./App.css';function getDt(date){return date.getFullYear().toString()+'/'+date.getMonth().toString()+'/'+date.getDate().toString();}function fetchWith(name,mtd,params){if(mtd==='POST'||mtd==='DELETE'){return fetch(name,{method:mtd,headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(params)}).then(function(res){return res.json();});}return fetch(name,{method:mtd}).then(function(res){return res.json();});}var InputBox=/*#__PURE__*/function(_Component){_inherits(InputBox,_Component);function InputBox(props){var _this;_classCallCheck(this,InputBox);_this=_possibleConstructorReturn(this,_getPrototypeOf(InputBox).call(this,props));_this.state={fname:\"\",lname:\"\",time:\"10:00\",kind:\"\"};return _this;}_createClass(InputBox,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:function onSubmit(event){return _this2.props.addAppt(_this2,event);}},\" \",React.createElement(\"label\",null,\" Patient name: \",\" \",React.createElement(\"input\",{type:\"text\",value:this.state.fname,name:\"First Name\",onChange:function onChange(event){return _this2.setState({fname:event.target.value});},placeholder:\"First Name\"}),React.createElement(\"input\",{type:\"text\",value:this.state.lname,name:\"Last Name\",onChange:function onChange(event){return _this2.setState({lname:event.target.value});},placeholder:\"Last Name\"}),React.createElement(TimePicker,{value:this.state.time,onClockClose:function onClockClose(){return _this2.setState(function(prev){var hr_mn=prev.time.split(':');var min=parseInt(hr_mn[1]);min=Math.floor(min/15)*15;var zero=\"\";if(min<10){zero='0';}return{time:hr_mn[0]+':'+zero+min.toString()};});},onChange:function onChange(newTime){return _this2.setState({time:newTime});}}),React.createElement(\"input\",{type:\"text\",value:this.state.kind,name:\"Kind\",onChange:function onChange(event){return _this2.setState({kind:event.target.value});},placeholder:\"Kind\"}),React.createElement(\"input\",{type:\"submit\",name:\"Kind\",value:\"Enter\"}))));}}]);return InputBox;}(Component);//the dashboard application\nvar App=/*#__PURE__*/function(_Component2){_inherits(App,_Component2);function App(props){var _this3;_classCallCheck(this,App);_this3=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this3.state={doctorData:{},viewDoctor:\"\",viewDate:new Date(),newApptID:0};_this3.addAppt=_this3.addAppt.bind(_assertThisInitialized(_this3));_this3.removeAppt=_this3.removeAppt.bind(_assertThisInitialized(_this3));return _this3;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;this.setState({welcomeMessage:\"loading...\"});fetchWith('/get-data','GET',{}).then(function(data){return _this4.setState({doctorData:data.doctors});});}},{key:\"addAppt\",value:function addAppt(comp,event){event.preventDefault();var appt=comp.state;var apptID=this.state.newApptID.toString();var dr=this.state.viewDoctor;var date=getDt(this.state.viewDate);var params={apptID:apptID,ID:dr,date:date,appt:appt};var total=0;if(date in prev.doctorData[dr].appts){var apptsList=Object.values(prev.doctorData[dr].appts[date]);for(var other in apptsList){if(other.time===appt.time){total++;}if(total==3){alert('Too many appointments scheduled at that time.');return;}}}this.setState(function(prev){if(!(date in prev.doctorData[dr].appts)){prev.doctorData[dr].appts[date]={};}prev.doctorData[dr].appts[date][apptID]=appt;return{doctorData:prev.doctorData,newApptID:prev.newApptID+1};});fetchWith('/add-appt','POST',params);comp.setState({fname:\"\",lname:\"\",time:\"\",kind:\"\"});}},{key:\"removeAppt\",value:function removeAppt(apptID){var dr=this.state.viewDoctor;var date=getDt(this.state.viewDate);var params={apptID:apptID,ID:dr,date:date};this.setState(function(prev){delete prev.doctorData[dr].appts[date][apptID];return{doctorData:prev.doctorData};});fetchWith('/rmv-appt','DELETE',params);}},{key:\"render\",value:function render(){var _this5=this;var doctorList=Object.entries(this.state.doctorData);var app=this;var DoctorDisplay=\"\";var doc=null,scheds;if(app.state.viewDoctor in app.state.doctorData){var doc=app.state.doctorData[app.state.viewDoctor];var schedDisplay=\"\";if(getDt(app.state.viewDate)!=\"\"){var schedTableDisplay=\"\";if(getDt(app.state.viewDate)in doc.appts){scheds=Object.entries(doc.appts[getDt(app.state.viewDate)]);schedTableDisplay=React.createElement(\"div\",null,scheds.map(function(item){return React.createElement(\"p\",{eventKey:item[0]},\" Name: \",item[1].fname,\" \",item[1].lname,\"   | Time: \",item[1].time,\"   | Kind: \",item[1].kind,React.createElement(\"a\",{onClick:function onClick(event){return _this5.removeAppt(item[0]);}},\" | (Remove)\"));}));}schedDisplay=React.createElement(\"div\",null,schedTableDisplay,React.createElement(InputBox,{addAppt:app.addAppt}));}DoctorDisplay=React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Dr. \",doc.fname,\" \",doc.lname),React.createElement(\"h3\",null,doc.email),React.createElement(\"label\",null,\" Select Date: \",\" \",React.createElement(DatePicker,{selected:this.state.viewDate,onChange:function onChange(date){return app.setState({viewDate:date});}})),schedDisplay);}return React.createElement(\"div\",null,React.createElement(\"h1\",null,\" Physician List: \"),React.createElement(\"ul\",null,doctorList.map(function(item){var selected=\"\";if(item[0]==app.state.viewDoctor){selected='(X)';}return React.createElement(\"li\",{eventKey:item[0]},\" \",React.createElement(\"a\",{onClick:function onClick(event){return app.setState({viewDoctor:item[0]});}},item[1].lname,\", \",item[1].fname,\" \"),\" \",selected,\" \");})),React.createElement(\"div\",{class:\"App\"},React.createElement(\"h1\",null,window.token),DoctorDisplay));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["D:/Users/Ethan/Documents/hackathons/NotableDashboard/react-frontend/src/App.js"],"names":["React","Component","DatePicker","TimePicker","getDt","date","getFullYear","toString","getMonth","getDate","fetchWith","name","mtd","params","fetch","method","headers","body","JSON","stringify","then","res","json","InputBox","props","state","fname","lname","time","kind","event","addAppt","setState","target","value","prev","hr_mn","split","min","parseInt","Math","floor","zero","newTime","App","doctorData","viewDoctor","viewDate","Date","newApptID","bind","removeAppt","welcomeMessage","data","doctors","comp","preventDefault","appt","apptID","dr","ID","total","appts","apptsList","Object","values","other","alert","doctorList","entries","app","DoctorDisplay","doc","scheds","schedDisplay","schedTableDisplay","map","item","email","selected","window","token"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport DatePicker from \"react-datepicker\";\nimport TimePicker from 'react-time-picker';\nimport './App.css';\nfunction getDt(date){\n  return date.getFullYear().toString() + '/' +date.getMonth().toString() + '/' +date.getDate().toString();\n}\n\nfunction fetchWith(name, mtd, params){\n  if(mtd === 'POST' || mtd === 'DELETE') {\n    return fetch(name, {method: mtd, \n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(params)})\n      .then(res => res.json());\n    }\n    return fetch(name, {method: mtd})\n      .then(res => res.json());\n}\n\nclass InputBox extends Component{\n  constructor(props){\n    super(props);\n    this.state={fname : \"\", lname : \"\", time: \"10:00\", kind: \"\"};\n  }\n\n  render(){\n    return (<div><form onSubmit={event => \n      this.props.addAppt(this, event)}> <label> Patient name: {\" \"} \n      <input type=\"text\" value={this.state.fname} name=\"First Name\"\n          onChange={event => this.setState({fname : event.target.value})} \n          placeholder=\"First Name\"/> \n      <input type=\"text\" value={this.state.lname} name=\"Last Name\"\n          onChange={event => this.setState({lname : event.target.value})} \n          placeholder=\"Last Name\"/> \n      <TimePicker\n          value={this.state.time}\n          onClockClose={()=>this.setState(function(prev){\n            var hr_mn = prev.time.split(':');\n            var min = parseInt(hr_mn[1]);\n            min = Math.floor(min/15) * 15;\n            var zero = \"\";\n            if(min < 10){\n              zero ='0';\n            }\n            return {time: hr_mn[0]+':'+zero+min.toString()};\n          })}\n          onChange={newTime => this.setState({time : newTime})} />\n      <input type=\"text\" value={this.state.kind} name=\"Kind\"\n          onChange={event => this.setState({kind : event.target.value})} \n          placeholder=\"Kind\"/> \n      <input type=\"submit\" name=\"Kind\" value=\"Enter\"/> \n      </label>\n      </form></div>)\n  }\n}\n\n//the dashboard application\nclass App extends Component{\n  constructor(props){\n    super(props);\n    this.state={doctorData : {},\n                viewDoctor: \"\",\n                viewDate: new Date(),\n                newApptID: 0};\n    this.addAppt=this.addAppt.bind(this);\n    this.removeAppt=this.removeAppt.bind(this);\n  }\n\n  componentDidMount(){\n    this.setState({welcomeMessage : \"loading...\"});\n    fetchWith('/get-data', 'GET', {})\n    .then(data => this.setState({doctorData : data.doctors}));\n  }\n\n  addAppt(comp, event){\n    event.preventDefault();\n    var appt = comp.state;\n    var apptID = this.state.newApptID.toString();\n    var dr = this.state.viewDoctor;\n    var date = getDt(this.state.viewDate);\n    var params = {apptID: apptID, ID: dr, date: date, appt: appt};\n    var total = 0;\n    if(date in prev.doctorData[dr].appts){   \n      var apptsList = Object.values(prev.doctorData[dr].appts[date]);\n      for(var other in apptsList){\n        if(other.time === appt.time){\n          total++;\n        }\n        if(total==3){\n          alert('Too many appointments scheduled at that time.')\n          return;\n        }\n      }\n    }\n    this.setState(function(prev){\n      if(!(date in prev.doctorData[dr].appts)){\n        prev.doctorData[dr].appts[date] = {};\n      }\n      prev.doctorData[dr].appts[date][apptID] = appt;\n      return {doctorData : prev.doctorData, newApptID : prev.newApptID + 1}});\n    fetchWith('/add-appt', 'POST', params);\n    comp.setState({fname : \"\", lname : \"\", time: \"\", kind: \"\"});\n  }\n\n  removeAppt(apptID){\n    var dr = this.state.viewDoctor;\n    var date = getDt(this.state.viewDate);\n    var params = {apptID: apptID, ID: dr, date: date};\n    this.setState(function(prev){\n      delete prev.doctorData[dr].appts[date][apptID];\n      return {doctorData : prev.doctorData}});\n    fetchWith('/rmv-appt', 'DELETE', params);\n  }\n\n\n  render() {\n    var doctorList = Object.entries(this.state.doctorData);\n    var app = this;\n    var DoctorDisplay = \"\";\n    var doc = null, scheds;\n    if(app.state.viewDoctor in app.state.doctorData){\n      var doc = app.state.doctorData[app.state.viewDoctor];\n      var schedDisplay = \"\";\n      if(getDt(app.state.viewDate) != \"\"){\n        var schedTableDisplay = \"\";\n        if(getDt(app.state.viewDate) in doc.appts){\n          scheds = Object.entries(doc.appts[getDt(app.state.viewDate)]);\n          schedTableDisplay = (<div>{scheds.map(item => \n            <p eventKey = {item[0]} > Name: {item[1].fname} {item[1].lname}   |     \n            Time: {item[1].time}   | Kind: {item[1].kind}\n            <a onClick={event => this.removeAppt(item[0])}> | (Remove)</a></p>)}</div>);\n        }\n        schedDisplay = (<div>{schedTableDisplay}\n            <InputBox addAppt={app.addAppt} /></div>);\n      }\n      DoctorDisplay = (<div>\n        <h2>Dr. {doc.fname} {doc.lname}</h2>\n        <h3>{doc.email}</h3>\n      <label> Select Date: {\" \"} \n      <DatePicker\n        selected={this.state.viewDate}\n          onChange={date => app.setState({viewDate: date})}/> \n      </label>\n        {schedDisplay}</div>)\n    }\n    return (<div>\n      <h1> Physician List: </h1>\n      <ul>{doctorList.map(function(item){\n          var selected = \"\"\n          if(item[0] == app.state.viewDoctor){\n            selected = '(X)'\n          }\n          return (<li eventKey = {item[0]}> <a onClick={(event)=>\n          app.setState({viewDoctor : item[0]})}>\n              {item[1].lname}, {item[1].fname} </a> {selected} </li>)})}</ul>\n      <div class=\"App\">\n        <h1>{window.token}</h1>\n        {DoctorDisplay}\n        </div></div>\n  );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}